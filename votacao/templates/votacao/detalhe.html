
{% extends 'votacao:index.html' %}
{% block title %}Detalhe{% endblock %}
<h1>{{ questao.questao_texto }}</h1>

{% if error_message %}
<p style="color: red;"p> <strong>{{ error_message }}</strong></p>
{% endif %}

<form action="{% url 'votacao:voto' questao.id %}"
method="post">
{% csrf_token %}
{% for opcao in questao.opcao_set.all %}
<input type="radio" name="opcao" id="opcao{{ forloop.counter }}" value="{{ opcao.id }}" />

<label for="opcao{{ forloop.counter }}">
{{ opcao.opcao_texto }}
</label>
    {% if request.user.is_staff %}
    <a href="{% url 'votacao:remover_opcao' questao.id opcao.id %}">Remover opção</a>
{% endif %}
<br>
{% endfor %}
<br>
{% if user.is_authenticated %}
<input type="submit" value="Voto" />
{% else %}
    <!-- Mensagem para usuários não autenticados -->
    <p>Faça login para votar. </p>
{% endif %}
</form>
<br>
   {% if request.user.is_staff %}
    <a href="{% url 'votacao:criaropcao' questao.id %}"> <button> Adicionar opção </button> </a>
    <br>
    <br>
    <a href="{% url 'votacao:remover_questao' questao.id %}"> <button> Remover questão </button> </a>
{% endif %}
<br>
<br>
    <a href="{% url 'votacao:index' %}"><button> Voltar </button></a>
{% if not user.is_authenticated %}
   <a href="{% url 'votacao:login' %}"><button> Login </button></a>
{% endif %}
